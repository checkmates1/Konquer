<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js">
  jQuery('button').click(function(){
     jQuery(this).toggleClass('active');
  });
</script>

<h1>Join this Game!</h1>

<h6><%= link_to 'Go back to open games', root_path %></h6>

<h3><%= @game.name %></h3>

<% if user_signed_in? %>
  <% if @game.white_player_id == nil %>
    <%= link_to 'Join Game', game_path(@game, game: { white_player_id: current_user.id }), method: :put %>
  <% elsif @game.black_player_id == nil && @game.white_player_id != nil %>
    <% if @game.white_player_id == current_user.id %>
      <p> Waiting for one more player </p>
    <% else %>
      <p> Only one more player needed! </p>
      <%= link_to 'Join Game', game_path(@game, game: { black_player_id: current_user.id }), method: :put %>
    <% end %>
  <% else %>
    <p> White Player ID: <%= @game.white_player_id %> </p>
    <p> Black Player ID: <%= @game.black_player_id %> </p>
    <p> Game is full.</p>
    <%= link_to 'Try Another Game', root_path %>
  <% end %>
<% else %>
  <%= link_to 'Sign In To Join', new_user_session_path %>
  <br  />
  <%= link_to 'Sign Up To Join', new_user_registration_path %>
<% end %>
<div class="grass valign-wrapper green lighten-3">
  <div class="card-panel frame">
    <div class="spacing">
      <div class="row top">
        <div class="black left selected"><%= link_to render_piece(0,7), piece_path %></div>
        <div class="white left"><%= link_to render_piece(1,7), piece_path %></div>
        <div class="black left"><%= link_to render_piece(2,7), piece_path %></div>
        <div class="white left"><%= link_to render_piece(3,7), piece_path %></div>
        <div class="black left"><%= link_to render_piece(4,7), piece_path %></div>
        <div class="white left"><%= link_to render_piece(5,7), piece_path %></div>`
        <div class="black left"><%= link_to render_piece(6,7), piece_path %></div>
        <div class="white left"><%= link_to render_piece(7,7), piece_path %></div>
      </div>

      <div class="row">
        <div class="white left"><%= link_to render_piece(0,6), piece_path %></div>
        <div class="black left"><%= link_to render_piece(1,6), piece_path %></div>
        <div class="white left"><%= link_to render_piece(2,6), piece_path %></div>
        <div class="black left"><%= link_to render_piece(3,6), piece_path %></div>
        <div class="white left"><%= link_to render_piece(4,6), piece_path %></div>
        <div class="black left"><%= link_to render_piece(5,6), piece_path %></div>
        <div class="white left"><%= link_to render_piece(6,6), piece_path %></div>
        <div class="black left"><%= link_to render_piece(7,6), piece_path %></div>
      </div>

      <div class="row">
        <div class="black left"><%= link_to render_piece(0,5), piece_path %></div>
        <div class="white left"><%= link_to render_piece(1,5), piece_path %></div>
        <div class="black left"><%= link_to render_piece(2,5), piece_path %></div>
        <div class="white left"><%= link_to render_piece(3,5), piece_path %></div>
        <div class="black left"><%= link_to render_piece(4,5), piece_path %></div>
        <div class="white left"><%= link_to render_piece(5,5), piece_path %></div>
        <div class="black left"><%= link_to render_piece(6,5), piece_path %></div>
        <div class="white left"><%= link_to render_piece(7,5), piece_path %></div>
      </div>

      <div class="row">
        <div class="white left"><%= link_to render_piece(0,4), piece_path %></div>
        <div class="black left"><%= link_to render_piece(1,4), piece_path %></div>
        <div class="white left"><%= link_to render_piece(2,4), piece_path %></div>
        <div class="black left"><%= link_to render_piece(3,4), piece_path %></div>
        <div class="white left"><%= link_to render_piece(4,4), piece_path %></div>
        <div class="black left"><%= link_to render_piece(5,4), piece_path %></div>
        <div class="white left"><%= link_to render_piece(6,4), piece_path %></div>
        <div class="black left"><%= link_to render_piece(7,4), piece_path %></div>
      </div>

      <div class="row">
        <div class="black left"><%= link_to render_piece(0,3), piece_path %></div>
        <div class="white left"><%= link_to render_piece(1,3), piece_path %></div>
        <div class="black left"><%= link_to render_piece(2,3), piece_path %></div>
        <div class="white left"><%= link_to render_piece(3,3), piece_path %></div>
        <div class="black left"><%= link_to render_piece(4,3), piece_path %></div>
        <div class="white left"><%= link_to render_piece(5,3), piece_path %></div>
        <div class="black left"><%= link_to render_piece(6,3), piece_path %></div>
        <div class="white left"><%= link_to render_piece(7,3), piece_path %></div>
      </div>

      <div class="row">
        <div class="white left"><%= link_to render_piece(0,2), piece_path %></div>
        <div class="black left"><%= link_to render_piece(1,2), piece_path %></div>
        <div class="white left"><%= link_to render_piece(2,2), piece_path %></div>
        <div class="black left"><%= link_to render_piece(3,2), piece_path %></div>
        <div class="white left"><%= link_to render_piece(4,2), piece_path %></div>
        <div class="black left"><%= link_to render_piece(5,2), piece_path %></div>
        <div class="white left"><%= link_to render_piece(6,2), piece_path %></div>
        <div class="black left"><%= link_to render_piece(7,2), piece_path %></div>
      </div>
      <div class="row">
        <div class="black left"><%= link_to render_piece(0,1), piece_path %></div>
        <div class="white left"><%= link_to render_piece(1,1), piece_path %></div>
        <div class="black left"><%= link_to render_piece(2,1), piece_path %></div>
        <div class="white left"><%= link_to render_piece(3,1), piece_path %></div>
        <div class="black left"><%= link_to render_piece(4,1), piece_path %></div>
        <div class="white left"><%= link_to render_piece(5,1), piece_path %></div>
        <div class="black left"><%= link_to render_piece(6,1), piece_path %></div>
        <div class="white left"><%= link_to render_piece(7,1), piece_path %></div>
      </div>

      <div class="row bottom">
        <div class="white left"><%= link_to render_piece(0,0), piece_path %></div>
        <div class="black left"><%= link_to render_piece(1,0), piece_path %></div>
        <div class="white left"><%= link_to render_piece(2,0), piece_path %></div>
        <div class="black left"><%= link_to render_piece(3,0), piece_path %></div>
        <div class="white left"><%= link_to render_piece(4,0), piece_path %></div>
        <div class="black left"><%= link_to render_piece(5,0), piece_path %></div>
        <div class="white left"><%= link_to render_piece(6,0), piece_path %></div>
        <div class="black left"><%= link_to render_piece(7,0), piece_path %></div>
      </div>
    </div>
  </div>
</div>
